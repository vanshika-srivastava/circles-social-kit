'use client'
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _tslib = require('../../../../../_virtual/_tslib.cjs');

const createMagicHandler = (connector, handleInstalledExtensionClick) => (email) => _tslib.__awaiter(void 0, void 0, void 0, function* () {
    if (!connector) {
        throw new Error('OTP wallet connector was not found');
    }
    connector.setEmail(email);
    handleInstalledExtensionClick(connector);
    return {
        retry: () => connector.retryOneTimePassword(),
        type: 'email',
        verify: (oneTimePassword) => _tslib.__awaiter(void 0, void 0, void 0, function* () {
            return ({
                destination: email,
                verified: yield connector.verifyOneTimePassword(oneTimePassword),
            });
        }),
    };
});

exports.createMagicHandler = createMagicHandler;
