'use client'
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var utils = require('@dynamic-labs/utils');
var localStorage = require('../../../../utils/constants/localStorage.cjs');

const clearExpiredData = (store) => {
    const { projectSettings, networkConfigurations, user } = store.getState();
    // TODO: we can clean this up once we move wallet info to the store
    const [connectedWalletData] = utils.StorageService.getItem(localStorage.CONNECTED_WALLETS_INFO) || [];
    const shouldRemoveSettingsAndConfigs = !user && !connectedWalletData;
    const isExpired = (value) => shouldRemoveSettingsAndConfigs ||
        (value.expiresAt && value.expiresAt < Date.now());
    if (isExpired(projectSettings)) {
        store.setState({
            projectSettings: store.getInitialState().projectSettings,
        });
    }
    if (isExpired(networkConfigurations)) {
        store.setState({
            networkConfigurations: store.getInitialState().networkConfigurations,
        });
    }
    return store;
};

exports.clearExpiredData = clearExpiredData;
