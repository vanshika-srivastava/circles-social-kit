'use client'
import EventEmitter from 'eventemitter3';
import { createRequestChannel } from '../../requestChannel/requestChannel.js';

// There are way too many "any"s in this file. They are necessary because otherwise the generics won't work
function createEventEmitterForMessages({ messageTransport, initialEventEmitter, key, }) {
    const events = initialEventEmitter !== null && initialEventEmitter !== void 0 ? initialEventEmitter : new EventEmitter();
    const requestChannel = createRequestChannel(messageTransport);
    requestChannel.handle('eventEmitted', (eventKey, eventName, payload) => {
        if (eventKey === key)
            events.emit(eventName, ...payload);
    });
    return events;
}

export { createEventEmitterForMessages };
