'use client'
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var zod = require('zod');
var nonEmptyString = require('./utils/nonEmptyString.cjs');
var transformChromeExtensionId = require('./utils/transformChromeExtensionId.cjs');
var transformEdgeExtensionId = require('./utils/transformEdgeExtensionId.cjs');
var transformFirefoxExtensionId = require('./utils/transformFirefoxExtensionId.cjs');
var transformIosId = require('./utils/transformIosId.cjs');
var transformAndroidId = require('./utils/transformAndroidId.cjs');
var nonEmptyStringArray = require('./utils/nonEmptyStringArray.cjs');
var filterEmptyObject = require('./utils/filterEmptyObject.cjs');

const injectedConfigSchema = zod.z.object({
    chain: zod.z.string(),
    extensionLocators: zod.z.array(zod.z.object({
        flag: zod.z.string(),
        value: zod.z.boolean().optional().default(true),
    })),
    /**
     * Allows declaring which interface, if any, this wallet's implementation follows
     * ex. Leather with https://btckit.org/
     */
    providerInterface: zod.z.string().optional(),
    /**
     * Allows declaring that this wallet is discoverable through the the Wallet Standard
     * See https://github.com/wallet-standard/wallet-standard
     * Also allows ignoring wallets that don't support the provided features
     */
    walletStandard: zod.z
        .object({
        features: zod.z.array(zod.z.string()),
        name: zod.z.string(),
        providerId: zod.z.string().optional(),
    })
        .optional(),
    walletStandardLocators: zod.z
        .array(zod.z.object({ locator: zod.z.string(), name: zod.z.string() }))
        .optional(),
    windowLocations: zod.z
        .array(zod.z.string())
        .optional()
        .refine((val) => {
        if (!val)
            return true;
        if (!val.some((v) => ['ethereum', 'ethereum.providers'].includes(v)))
            return true;
        return false;
    }, {
        message: 'windowLocations cannot include ethereum or ethereum.providers as they are included by default',
        path: ['config'],
    }),
});
const brandSchema = zod.z.object({
    alt: nonEmptyString.nonEmptyString,
    primaryColor: nonEmptyString.nonEmptyString,
    spriteId: nonEmptyString.nonEmptyString,
});
const walletSchema = zod.z
    .preprocess((val) => val, zod.z.object({
    brand: brandSchema.optional(),
    chainGroup: zod.z.string().optional(),
    chains: zod.z.array(zod.z.string()).optional(),
    desktop: zod.z
        .object({
        chromeId: nonEmptyString.nonEmptyString.transform(transformChromeExtensionId.transformChromeExtensionId),
        edgeId: nonEmptyString.nonEmptyString.transform(transformEdgeExtensionId.transformEdgeExtensionId),
        firefoxId: nonEmptyString.nonEmptyString.transform(transformFirefoxExtensionId.transformFirefoxExtensionId),
        native: nonEmptyString.nonEmptyString,
        operaId: nonEmptyString.nonEmptyString,
        safariId: nonEmptyString.nonEmptyString,
        universal: nonEmptyString.nonEmptyString,
    })
        .optional()
        .transform(filterEmptyObject.filterEmptyObject),
    eip6963Config: zod.z.object({ rdns: zod.z.string() }).optional(),
    filterFromWalletConnect: zod.z.boolean().optional(),
    group: zod.z.string().optional(),
    /**
     * Indicates which hardware wallets are enabled for this wallet
     */
    hardwareWallets: zod.z.array(zod.z.string()).optional(),
    injectedConfig: zod.z.array(injectedConfigSchema).optional(),
    mobile: zod.z
        .object({
        android: zod.string().nullish(),
        androidId: nonEmptyString.nonEmptyString.transform(transformAndroidId.transformAndroidId),
        inAppBrowser: zod.string().nullish(),
        ios: zod.string().nullish(),
        iosId: nonEmptyString.nonEmptyString.transform(transformIosId.transformIosId),
        native: nonEmptyString.nonEmptyString,
        universal: nonEmptyString.nonEmptyString,
    })
        .optional()
        .transform(filterEmptyObject.filterEmptyObject),
    mobileExperience: zod.z.enum(['in-app-browser', 'redirect']).optional(),
    name: zod.z.string(),
    shortName: nonEmptyString.nonEmptyString,
    showOnlyIfInstalled: zod.z.boolean().optional(),
    switchNetworkOnlyFromWallet: zod.z.boolean().optional(),
    walletConnect: zod.z
        .object({
        sdks: nonEmptyStringArray.nonEmptyStringArray,
    })
        .optional()
        .transform(filterEmptyObject.filterEmptyObject),
    walletGroup: zod.z.string().optional(),
    /**
     * Indicates which connector methods/events are not supported, keyed by wallet type
     */
    walletLimitations: zod.z
        .object({
        browserExtension: zod.z
            .object({
            unsupportedEvents: zod.z.array(zod.z.string()).optional(),
            unsupportedMethods: zod.z.array(zod.z.string()).optional(),
        })
            .optional(),
        mobile: zod.z
            .object({
            unsupportedEvents: zod.z.array(zod.z.string()).optional(),
            unsupportedMethods: zod.z.array(zod.z.string()).optional(),
        })
            .optional(),
    })
        .optional(),
}))
    .transform((val) => {
    var _a, _b, _c, _d, _e, _f;
    if (val.group) {
        val.chainGroup = val.group;
    }
    if (((_a = val.mobile) === null || _a === void 0 ? void 0 : _a.iosId) || ((_b = val.mobile) === null || _b === void 0 ? void 0 : _b.ios) === null) {
        (_c = val.mobile) === null || _c === void 0 ? true : delete _c.ios;
    }
    if (((_d = val.mobile) === null || _d === void 0 ? void 0 : _d.androidId) || ((_e = val.mobile) === null || _e === void 0 ? void 0 : _e.android) === null) {
        (_f = val.mobile) === null || _f === void 0 ? true : delete _f.android;
    }
    return val;
});

exports.brandSchema = brandSchema;
exports.walletSchema = walletSchema;
